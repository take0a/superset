---
title: アーキテクチャ
hide_title: true
sidebar_position: 1
version: 1
---

import useBaseUrl from "@docusaurus/useBaseUrl";

# アーキテクチャ

このページは、新しい管理者に Superset のコンポーネントを理解してもらうことを目的としています。

## コンポーネント

Superset のインストールは、次のコンポーネントで構成されます:

1. Superset アプリケーション自体
2. メタデータ データベース
3. キャッシュ レイヤー (オプションですが、一部の機能には必要です)
4. ワーカーとビート (オプションですが、一部の機能には必要です)

### オプションのコンポーネントと関連機能

これらの機能を有効にするには、上記のオプション コンポーネントが必要です:

- [アラートとレポート](/docs/configuration/alerts-reports)
- [キャッシュ](/docs/configuration/cache)
- [非同期クエリ](/docs/configuration/async-queries-celery/)
- [ダッシュボード サムネイル](/docs/configuration/cache/#caching-thumbnails)

Kubernetes または Docker Compose を使用してインストールすると、これらのコンポーネントがすべて作成されます。

ただし、PyPI からインストールすると、アプリケーション自体のみが作成されるだけです。
PyPI からインストールするユーザーは、上記の機能を有効にする場合、キャッシュ レイヤー、ワーカー、およびビートを独自に構成する必要があります。
PyPI インストールのこれらのコンポーネントの構成については、現在このドキュメントでは説明されていません。

各コンポーネントの詳細については、以下を参照してください。

### Superset アプリケーション

これがコア アプリケーションです。Superset は次のように動作します:

- ユーザーがチャートまたはダッシュボードにアクセスする
- これによって、基礎となるデータセットを保持するデータ ウェアハウスへの SQL クエリがトリガーされる
- 結果のデータはデータ視覚化で提供される
- Superset アプリケーションは、Webpack 経由で構築された Python (Flask) バックエンド アプリケーション (サーバー)、API レイヤー、React フロントエンド、およびアプリケーションの動作に必要な静的アセットで構成されています

### メタデータデータベース

ここには、チャートとダッシュボードの定義、ユーザー情報、ログなどが保存されます。
Superset は、メタデータ データベースとして PostgreSQL および MySQL データベースで動作するようにテストされています (データ ウェアハウスなどのデータ ソースと混同しないでください。データ ソースには、Snowflake、Redshift などのさまざまなオプションがあります)。

クイックスタートや PyPI などの一部のインストール方法は、デフォルトで SQLite オンディスク データベースを使用するように構成されています。
また、Docker Compose インストールでは、データは PostgreSQL コンテナー ボリュームに保存されます。
どちらの場合も、Superset の運用インスタンスには推奨されません。

運用には、適切に構成され、管理されたスタンドアロン データベースが推奨されます。
使用するデータベースに関係なく、定期的にバックアップすることを計画する必要があります。

### キャッシュ層

キャッシュ レイヤーには、主に次の 2 つの機能があります。

- クエリの結果をデータ ウェアハウスに保存します。
  これにより、チャートが 2 回読み込まれると、2 回目にキャッシュから取得され、アプリケーションが高速化され、データ ウェアハウスの負荷が軽減されます。
- ワーカーのメッセージ ブローカーとして機能し、アラートとレポート、非同期クエリ、サムネイル キャッシュ機能を有効にします。

ほとんどのユーザーはキャッシュに Redis を使用しますが、Superset は他のオプションもサポートしています。
詳細については、[キャッシュ ドキュメント](/docs/configuration/cache/) を参照してください。

### Worker と Beat

これは、非同期クエリの実行、レポートのスナップショットの取得、電子メールの送信などのタスクを実行する 1 人以上のワーカーと、スケジューラとして機能し、ワーカーにタスクを実行するタイミングを指示する「ビート」です。
ほとんどのインストールでは、これらのコンポーネントに Celery を使用します。

## その他のコンポーネント

他のコンポーネントを Superset に組み込むこともできます。
追加の構成について学習するのに最適な場所は、[構成ページ](/docs/configuration/configuring-superset) です。
たとえば、ロード バランサーまたはリバース プロキシを設定して Superset アプリケーションの前に HTTPS を実装したり、Mapbox URL を指定して地理空間チャートを有効にしたりすることができます。

特定の構成設定が確立されていないと Superset は起動しないため、このページを確認することが重要です。
